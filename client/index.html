<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Vídeo do Servidor</title>
</head>

<body>
    <h1>Upload de Arquivos</h1>
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" name="video" id="video-input">
        <button type="button" id="upload-button">Enviar</button>
    </form>

    <h1>Lista de Vídeos</h1>
    <ul id="lista-videos">
        <li><a href="#" data-src="video.mp4">Vídeo 1</a></li>
        <li><a href="#" data-src="video2.mp4">Vídeo 2</a></li>
        <li><a href="#" data-src="video3.mp4">Vídeo 3</a></li>
    </ul>
    <div>
        <video id="reprodutor" width="640" height="480" controls>
            Seu navegador não suporta a exibição de vídeos.
        </video>
    </div>
    
    
</body>
<script>
    const listaVideos = document.getElementById("lista-videos");
    const reprodutor = document.getElementById("reprodutor");
    const form = document.getElementById("formulario-upload");
    listaVideos.addEventListener("click", function(e) {
        if (e.target.tagName === "A") {
            e.preventDefault();
            const dataSrc = e.target.getAttribute("data-src");
            const videoUrl = "http://127.0.0.1:8080/server/" + dataSrc;
            const source = reprodutor.firstElementChild;
            reprodutor.src = videoUrl;
            reprodutor.load();
            reprodutor.play();
        }

        
    });

    document.getElementById('upload-button').addEventListener('click', function () {
            var fileInput = document.getElementById('video-input');
            var file = fileInput.files[0];
            var serialized_file = file.stream();

            fetch('http://127.0.0.1:8080/server/', {
                method: 'POST',
                body: serialized_file
            })
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.log(error);
            });
        });
</script>
</html>
